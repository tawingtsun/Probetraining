<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TA WingTsun – Probetraining</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4; /* Leichter grauer Hintergrund für die Seite */
      color: #111;
      position: relative; 
      z-index: 0;
    }
    
    /* * DER TRICK: Ein "virtuelles" Element, das HINTER dem Inhalt liegt
     * und NUR das Logo enthält.
    */
    body::before {
      content: "";
      position: fixed; /* Bleibt beim Scrollen an Ort und Stelle */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      
      /* Hier stylen wir das Logo */
      background-image: url('TAWT-Logo.png');
      background-repeat: no-repeat;
      background-position: center 80%; /* 80% von oben */
      background-size: 40%;
      
      /* HIER ist die Transparenz sicher, sie betrifft NUR das Logo */
      opacity: 0.15; 
      
      z-index: -1; /* Legt das Logo HINTER den Body-Inhalt */
    }

    header img {
      max-width: 100%;
      display: block;
    }
    
    /* * Dies ist der Container mit dem Formular.
     * Er MUSS einen soliden Hintergrund haben, um das Logo zu überdecken.
    */
    .container {
      max-width: 600px;
      margin: -50px auto 2rem;
      padding: 2rem;
      background: #fff; /* <-- Das ist die wichtigste Zeile! Solid weiß. */
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      position: relative; /* Stellt sicher, dass es über dem Logo liegt */
      z-index: 1; 
    }
    
    /* --- Ab hier ist alles wie vorher --- */
    h1 {
      text-align: center;
      color: #c90000;
    }
    p {
      text-align: center;
      font-size: 1rem;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    input, select {
      padding: 0.8rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      padding: 1rem;
      font-size: 1rem;
      background-color: #c90000;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background-color: #a80000;
    }
    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.8rem;
      color: #888;
    }
  </style>
</head>
<body>

  <header>
    <img src="headergrafik.png" alt="TA WingTsun Headergrafik" />
  </header>
  
  <main class="container">
    <h1>Du bist da – Willkommen zum Probetraining!</h1>
    <p>Schön, dass du heute bei uns in der <strong>TA WingTsun Selbstverteidigungsschule</strong> bist!<br>
    Bitte fülle dieses kurze Formular aus, damit wir deinen Besuch bestätigen können.<br>
    Im Anschluss erhältst du den Link zu unserem Instagram-Profil.</p>
    
    <form id="probetraining-form" action="https://formspree.io/f/xkgpdrwz" method="POST">

      <input type="hidden" name="_next" value="https://www.instagram.com/tawt_selbstverteidigung/">

      <input type="text" name="Name" placeholder="Wie heißt du?" required>
      
      <input type="email" name="E-Mail" placeholder="Deine E-Mail-Adresse" required>
      
      <input type="tel" name="Telefon" placeholder="Telefonnummer (optional)">
      
      <select name="Gruppe" required>
        <option value="" disabled selected>Welche Gruppe besuchst du heute?</option>
        <option value="Kindergruppe">Kindergruppe</option>
        <option value="Jugendgruppe">Jugendgruppe</option>
        <option value="Erwachsenengruppe">Erwachsenengruppe</option>
      </select>
      <select name="Standort" required>
    <option value="" disabled selected>An welchem Standort?</option>
    <option value="Bad Nenndorf">Bad Nenndorf</option>
    <option value="Barsinghausen">Barsinghausen</option>
    <option value="Hemmingen">Hemmingen</option>
    <option value="Laatzen">Laatzen</option>
    <option value="Ronnenberg">Ronnenberg</option>
    <option value="Verden">Verden</option>
    <option value="Wunstorf">Wunstorf</option>
     </select>
      
      <select name="Quelle" required>
        <option value="" disabled selected>Wie hast du von uns erfahren?</option>
        <option value="Instagram">Instagram</option>
        <option value="TikTok">TikTok</option>
        <option value="Freunde/Bekannte">Freunde/Bekannte</option>
        <option value="Flyer/Plakate">Flyer/Plakate</option>
        <option value="Standort">Standort</option>
        <option value="Sonstiges">Sonstiges</option>
      </select>
      
      <label>
        <input type="checkbox" name="Datenschutz" value="Zugestimmt" required> Ich bin einverstanden, dass meine Daten zum Zweck der Kontaktaufnahme und Kursorganisation...
      </label>
      
      <button id="submit-button" type="submit">Absenden & zu Instagram</button>

    </form>
  </main>
  
  <footer>
    © TA WingTsun – <a href="https://www.tawt-selbstverteidigung.de" target="_blank">www.tawt-selbstverteidigung.de</a>
  </footer>
  
  <script>
    window.addEventListener("DOMContentLoaded", function() {
      // Holt sich das Formular und den Button
      var form = document.getElementById("probetraining-form");
      var button = document.getElementById("submit-button");
      
      // Holt sich die Instagram-URL aus Ihrem versteckten Feld
      var redirectUrl = form.querySelector('input[name="_next"]').value;

      // Hängt sich an das "Absenden"-Ereignis
      form.addEventListener("submit", function(e) {
        e.preventDefault(); // Verhindert das normale Absenden
        
        // Zeigt dem Benutzer Feedback
        var status = document.createElement("p");
        button.disabled = true;
        button.innerText = "Sende..."; // Ändert den Button-Text

        // Bereitet die Daten für den Versand vor
        var data = new FormData(form);
        
        // Sendet die Daten im Hintergrund an Formspree
        fetch(form.action, {
          method: form.method,
          body: data,
          headers: {
              'Accept': 'application/json'
          }
        }).then(response => {
          // 1. Erfolgreich an Formspree gesendet
          if (response.ok) {
            // 2. Zu Instagram weiterleiten
            window.location.href = redirectUrl;
          } else {
            // 3. Fehler beim Senden (z.B. Formspree-Server down)
            response.json().then(data => {
              // Fehler anzeigen
              status.innerHTML = "Fehler: " + data.errors.map(error => error.message).join(", ");
              button.disabled = false;
              button.innerText = "Absenden & zu Instagram";
              form.appendChild(status);
            })
          }
        }).catch(error => {
          // 4. Fehler beim Senden (z.B. kein Internet)
          status.innerHTML = "Ein Fehler ist aufgetreten. Bitte prüfen Sie Ihre Internetverbindung.";
          button.disabled = false;
          button.innerText = "Absenden & zu Instagram";
          form.appendChild(status);
        });
      });
    });
  </script>

</body>
</html>
